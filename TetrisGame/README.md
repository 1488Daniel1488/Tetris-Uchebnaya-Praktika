# Игра TetrisGame

Суть игры заключается в управлении падающими геометрическими фигурами, называемыми **"тетрамино"**. Каждое **тетрамино** состоит из четырех квадратных блоков, соединенных друг с другом по разным моделям. Всего существует семь различных видов **тетрамино**: **прямая** линия, **квадрат**, **зеркально отраженная L-образная фигура**, **L-образная фигура**, **зеркально отраженная Z-образная фигура** и **Z-образная фигура**.  
Игровое поле представляет собой прямоугольную сетку, обычно состоящую из **10** столбцов и **20** строк. **Тетрамино** случайным образом появляются в верхней части поля и начинают падать вниз. Задача игрока - **вращать** и **перемещать** падающие фигуры таким образом, чтобы они образовывали **горизонтальные линии из десяти блоков** без промежутков.  
Как только одна или несколько полных горизонтальных линий сформированы, они исчезают с игрового поля, а оставшиеся блоки смещаются вниз.


# Файловая структура

   tetrisGame/
├── src/
│   ├── block.cpp
│   ├── block.h
│   ├── blocks.cpp
│   ├── colors.h
│   ├── game.cpp
│   ├── game.h
│   ├── grid.cpp
│   ├── grid.h
│   ├── position.h
│   └── TetrisGame.cpp
├── assets/
│   ├── fonts/
│   └── sounds/
├── README.md
└── ...
-   `block.cpp` и `block.h`: Определяют класс `Block`, который представляет отдельную фигуру в игре.
-   `blocks.cpp`: Содержит классы, наследующиеся от `Block`, для каждого типа фигуры (L, J, I, O, S, T, Z).
-   `colors.h`: Определяет цвета, используемые в игре.
-   `game.cpp` и `game.h`: Определяют класс `Game`, который содержит основную логику игры.
-   `grid.cpp` и `grid.h`: Определяют класс `Grid`, который представляет игровое поле.
-   `position.h`: Определяет структуру `Position`, используемую для хранения координат ячеек.
-   `TetrisGame.cpp`: Точка входа в программу, содержит главный игровой цикл и функции отрисовки.
-   `assets/fonts/`: Содержит файлы шрифтов, используемых в игре.
-   `assets/sounds/`: Содержит звуковые файлы, используемые в игре.
# Скриншоты/видео

**Интерфейс игры**
![интерфейс](https://lh3.googleusercontent.com/pw/AP1GczNExgJY2AIKdjb-vHXQL3zrGMYD2HO4Ozy-HtDxUlzb5KjXTsOHaXJnrIKopFlJa2rh7uQeCaTdLXVyqpP60MkyhI8K-aYWptKrNMeWb8nA8N33QhEBee-txYCDn8w9YHTcdc7uOXBInrJzWpXxZcg43abrh6FcH_XvxKbtkTRClWkuhzMRnXSlVGbZ-duPUGh-hGsFIAhFf7X94ltKjHZvFlKDHw-vjNd_8OB5qlDhLmjn_pO421WcYQvNHwXIEHOWM2LUkEkwkmYzv7FYqpULs_AtGOc7j9fcRX8K9rcmrY_Lt55L6fC-vy-tXeR9Lixlj2VRPYXmlOdF56OFl2biGXHjXbtwFOIuUbXXFwFC0gfpAxJNjlZqxEb4ZidfFnxxnTlzWy6qnq9K9kn9wtFKXGq17Lqilm2ldPqPAcFGzKQiUjuaqNVDd3rLryL_A1zcf4jAy3BX66hTTFR-7RxsWCMKd1ME4TWUzdAu-kDH5Gn9UZoAYkgAvnfCdgcJxUhxZvuSRMGN5Z_1JwpmpHTwdoQlif6OBTNFb4rYrrzqmfnYz4rIkHmR9G2gCV5kwMv2Hxan1PF_X0mKp7oEH8ksv-YJelglR-dhCYHTf4NiPslr8ScNv-gSlgP4VjEWVTmnFQ7f8kdBS3wMSI4s3JXvzreX1Y8FsuDohADmD2Z54HgrqRBu52AftnhsT3cx7l_6PICafnw8OMmd06bY_ilRUeHCa4whmD8Ds9P9MnBUndXqxfaP6HW6bgWmPytcgc6CLGqgbjofdVTjT_Ndu5kqVjoOx_xl0Sgg4SMVeMCwTvqgjty7bpkaNEe9CulLOehHCOoo6jayLyoyqGtsqWGx6P7msA-x1Ysxs2NLMAMOCfNh3Y-aHfAfoIuqgYSp5_k7VdGYALSca8OoHPXXqKO9=w940-h853-s-no-gm?authuser=0)


**Управление игрой:**
 - Клавиша A - переместить падающую фигуру влево.   
 - Клавиша D -    переместить падающую фигуру вправо.
 - Клавиша S - ускорить падение    фигуры вниз (за это начисляются
   дополнительные очки, одно нажатие —    одно очко).
 - Пробел (SPACE) - повернуть падающую фигуру по часовой    стрелке.

**Начисление очков:**  
- За заполненную горизонтальную линию из 10 клеток начисляется 100 очков.  
- За две заполненные линии сразу начисляется 300 очков.  
- За три и более заполненных линий сразу начисляется 500 очков.  

**Элементы интерфейса представлены на рис.1:**  
1) Игровое поле - это большая решетка размером 10 на 20 клеток в центре экрана, на которой падают и размещаются фигуры.  
2) Текущая фигура - это падающая фигура, которой игрок управляет на игровом поле.  
3) Следующая фигура - это фигура, которая появится после текущей. Показывается справа внизу.  
4) Счет - текущее количество набранных очков. Отображается справа вверху.  
5) Кнопка «Закрыть» для закрытия игры (так же можно использовать клавишу «escape»).

**Демо игры:**
https://disk.yandex.ru/i/m6csV0E4iUiDFA

# Фишки и принцип работы
Одной из ключевых особенностей этой реализации Тетрисa является использование объектно-ориентированного подхода. Каждая фигура представлена отдельным классом, который наследуется от базового класса `Block`. Это позволяет легко добавлять новые типы фигур в будущем.

Игровая логика инкапсулирована в классе `Game`, который управляет игровым циклом, обработкой ввода, генерацией фигур, проверкой столкновений и подсчетом очков.

Класс `Grid` отвечает за представление и визуализацию игрового поля, а также за обнаружение заполненных рядов и их очистку.

Для отрисовки графики и обработки ввода используется библиотека **Raylib**, что обеспечивает кросс-платформенность и высокую производительность.

# Трудности разработки
В процессе создания этой игры я столкнулся с несколькими трудностями:

1.  **Алгоритмы вращения фигур**: Одной из сложностей было реализовать корректное вращение фигур на игровом поле. Необходимо было учитывать различные состояния вращения для каждой фигуры и обрабатывать граничные случаи, когда фигура не может быть повернута из-за столкновения с краями игрового поля или другими фигурами.
2.  **Обнаружение заполненных рядов**: Эффективное обнаружение заполненных рядов и их очистка были нетривиальной задачей. Необходимо было разработать алгоритм, который бы последовательно проверял каждый ряд на наличие пробелов и перемещал вышестоящие фигуры вниз после очистки ряда.
3.  **Обработка ввода и синхронизация с игровой логикой**: Обеспечение плавного и отзывчивого управления игрой было сложной задачей. Необходимо было синхронизировать обработку ввода с игровым циклом и корректно обрабатывать одновременное нажатие нескольких клавиш.
4.  **Интеграция звуковых эффектов**: Добавление звуковых эффектов, таких как музыка и звуки вращения фигур или очистки рядов, потребовало изучения дополнительной библиотеки для работы со звуком и правильной интеграции ее с основным игровым циклом.
